

  cli
    exec
      âœ“ should contain commands with actions
    config
      âœ“ should pass empty opts when there is no arg
      âœ“ should pass bitbucket opts when specified in args
      âœ“ should pass github opts when specified in args
      âœ“ should pass gitorious opts when specified in args
      âœ“ should pass local opts when specified in args
    _exec
      âœ“ should execute custom command specified in arg if command is exec
      âœ“ should pass built-in command as-is
      âœ“ should use win32 command when executed on windows
      âœ“ should use custom config file when specified in args
    list
somerepo1
somerepo2
      âœ“ should log each repo name when there is result array
      âœ“ should not log anything when there is no result
    clean
Nothing to delete
      âœ“ should delete nothing when there is no directory to clean up
The following files/directories will be deleted: dir1, dir2
      âœ“ should delete directories to clean up when user confirms to do so
The following files/directories will be deleted: dir1, dir2
Nothing is deleted
      âœ“ should not delete directories to clean up when user confirms to not clean
The following files/directories will be deleted: dir1, dir2
Nothing is deleted
      âœ“ should not delete directories to clean up when user does not provide confirmation answer
[31msome error[39m
      âœ“ should pass error to callback when there is an error during dry run

  bitbucket
    bitbucket - bitbucket
      âœ“ should authenticate when username and password are specified
    bitbucket - generate
      âœ“ should create repoman config with repos
      âœ“ should log an error message when repo scm is unsupported
      âœ“ should pass error to callback when an error occurs while retrieving repos

  github
    github
      âœ“ should authenticate when username and password are specified
TODO: someunsupportedscm scm is not yet supported
      âœ“ should authenticate when username and password are not specified but auth token exists
      âœ“ should not authenticate when username and password are not specified
    generate
      âœ“ should create repoman config with users and orgs' repos
      âœ“ should pass error to callback when an error occurs while retrieving repos
    _paginate
Remaining GitHub API usage: 23/100
Remaining GitHub API usage: 22/100
      âœ“ should log remaining usage and pass result

  gitorious
    generate
      âœ“ should pass error when an error occurs while retrieving project
      âœ“ should pass repo URL when there is no error

  local
    generate
      âœ“ should construct config of git repos using git config remote origin
      âœ“ should construct config of svn repos using svn info repository root
      âœ“ should pass empty config when repo is neither git nor svn

  repoman
    config
Creating sample configuration file: .repoman.json
      âœ“ should copy sample couchpenter.js file to current directory when init is called
Setting configuration file: .repoman.json, with Bitbucket repositories
      âœ“ should create .repoman.json containing repos on bitbucket when bitbucket config is specified
Setting configuration file: .repoman.json, with GitHub repositories
      âœ“ should create .repoman.json containing repos on github when github config is specified
Setting configuration file: .repoman.json, with GitHub repositories
      âœ“ should pass error to callback when an error occurs while creating config containing github repos
Setting configuration file: .repoman.json, with Gitorious repositories
      âœ“ should create .repoman.json containing repos on gitorious when gitorious config is specified
Setting configuration file: .repoman.json, with local repositories
      âœ“ should create .repoman.json containing repos on local repositories when local config is specified
Setting configuration file: .repoman.json, with local repositories
      âœ“ should create .repoman.json containing repos on local repositories and remove any repos not existing locally if removeExtraneous is specified
Setting configuration file: .repoman.json, with Gitorious repositories
      âœ“ should pass error to callback when an error occurs while creating config containing gitorious repos
    exec
      âœ“ should return empty results when there is no repository and scm

+ couchdb
> git clone http://git-wip-us.apache.org/repos/asf/couchdb.git /somedir/couchdb

+ httpd
> svn checkout http://svn.apache.org/repos/asf/httpd/httpd/trunk/ /somedir/httpd
      âœ“ should log repositories name and execute commands with parameters applied when repositories exist

+ couchdb
> touch .gitignore; echo "Created /somedir/couchdb/.gitignore file";

+ httpd
> touch .gitignore; echo "Created /somedir/httpd/.gitignore file";
      âœ“ should execute command as-is on each repository when command is unsupported

+ couchdb
> touch .gitignore; echo "Created /somedir/couchdb/.gitignore file";
      âœ“ should execute command as-is on matching repository when tag is provided

+ couchdb
> touch .gitignore; echo "Created /somedir/couchdb/.gitignore file";
      âœ“ should execute command as-is on matching repository when regex is provided
      âœ“ should not execute any command when neither tags nor regex filters is applicable
    list
      âœ“ should pass repositories keys as list value
      âœ“ should filter repository by tag
      âœ“ should filter repository by regex
    clean
      âœ“ should return a list of non-repo dirs to delete during dry run
- dir1 has been deleted
- dir2 has been deleted
      âœ“ should remove a list of non-repo dirs during non dry run
      âœ“ should pass error to callback when an error occurs while reading the workspace dir
    _determineRepoType
      âœ“ should determine repo type based on keywords when repo config does not have type property
      âœ“ should default repo type to git when repo config does not have type property and URL does not contain repo keyword
      âœ“ should use type if specified in repo


  55 passing (151ms)

